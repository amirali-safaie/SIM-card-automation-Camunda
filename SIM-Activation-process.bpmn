<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.39.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.7.0">
  <bpmn:process id="Process_0lw1eff" name="SIM-Activation-process" isExecutable="true">
    <bpmn:callActivity id="Activity_1i8s3jd" name="billing process">
      <bpmn:extensionElements>
        <zeebe:calledElement processId="Process_0w8hy1i" propagateAllChildVariables="true" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1eoaypz</bpmn:incoming>
      <bpmn:outgoing>Flow_0mec1eb</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:endEvent id="Event_0noo8w1" name="end informing">
      <bpmn:incoming>Flow_0zubyo3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:boundaryEvent id="Event_06gyq7v" name="provision-failed" attachedToRef="Activity_1i4ls2u">
      <bpmn:outgoing>Flow_0cwy55s</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_066fh22" errorRef="Error_0akbgvj" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_0idjtrv" name="failed" attachedToRef="Activity_1i8s3jd">
      <bpmn:outgoing>Flow_12n2m36</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_101z0o9" errorRef="Error_0z4qsb1" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_04inom4" sourceRef="Activity_1o53ooi" targetRef="Event_0ctbde2" />
    <bpmn:sequenceFlow id="Flow_04q99ts" sourceRef="Event_0opizyh" targetRef="Gateway_1i9nuct" />
    <bpmn:sequenceFlow id="Flow_0cwy55s" sourceRef="Event_06gyq7v" targetRef="Gateway_0qgqawn" />
    <bpmn:sequenceFlow id="Flow_0jhjzho" sourceRef="Event_18h2lxk" targetRef="Gateway_1i9nuct" />
    <bpmn:sequenceFlow id="Flow_0zubyo3" sourceRef="Activity_19b7a6r" targetRef="Event_0noo8w1" />
    <bpmn:sequenceFlow id="Flow_11jfzaa" sourceRef="StartEvent_1" targetRef="Activity_11tz4ys" />
    <bpmn:sequenceFlow id="Flow_12f3it3" sourceRef="Gateway_1i9nuct" targetRef="Activity_19b7a6r" />
    <bpmn:sequenceFlow id="Flow_12n2m36" sourceRef="Event_0idjtrv" targetRef="Gateway_0qgqawn" />
    <bpmn:sequenceFlow id="Flow_1eoaypz" sourceRef="Activity_1i4ls2u" targetRef="Activity_1i8s3jd" />
    <bpmn:sequenceFlow id="Flow_1jsrnog" sourceRef="Gateway_0qgqawn" targetRef="Activity_1l26ptn" />
    <bpmn:sequenceFlow id="Flow_1s4gkim" sourceRef="Activity_1l26ptn" targetRef="Event_0aj417n" />
    <bpmn:exclusiveGateway id="Gateway_0qgqawn">
      <bpmn:incoming>Flow_0cwy55s</bpmn:incoming>
      <bpmn:incoming>Flow_12n2m36</bpmn:incoming>
      <bpmn:incoming>Flow_1utb8gx</bpmn:incoming>
      <bpmn:outgoing>Flow_1jsrnog</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1i9nuct">
      <bpmn:incoming>Flow_04q99ts</bpmn:incoming>
      <bpmn:incoming>Flow_0jhjzho</bpmn:incoming>
      <bpmn:incoming>Flow_1dgu64z</bpmn:incoming>
      <bpmn:outgoing>Flow_12f3it3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_19b7a6r" name="Inform The IT / network team" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="11" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="POST" target="method" />
          <zeebe:input source="http://fastapi:5000/IT-notice" target="url" />
          <zeebe:input source="={&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;  &#34;f_name&#34;:f_name,&#10;  &#34;l_name&#34; :l_na,&#10;  &#34;national_code&#34; :national_code,&#10;  &#34;city&#34; :city,&#10;  &#34;plan_type&#34; :plan_type&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="11" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.HttpJson.v2" />
          <zeebe:header key="resultVariable" value="api_response" />
          <zeebe:header key="resultExpression" value="={message:response.body.message}" />
          <zeebe:header key="retryBackoff" value="PT5M" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12f3it3</bpmn:incoming>
      <bpmn:outgoing>Flow_0zubyo3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:callActivity id="Activity_1i4ls2u" name="Provision SIM card">
      <bpmn:extensionElements>
        <zeebe:calledElement processId="Process_0kje7l8" propagateAllChildVariables="true" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ydma48</bpmn:incoming>
      <bpmn:outgoing>Flow_1eoaypz</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:endEvent id="Event_0aj417n" name="rejected">
      <bpmn:incoming>Flow_1s4gkim</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_1o53ooi" name="send approaved notice" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="11" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="POST" target="method" />
          <zeebe:input source="http://fastapi:5000/customer-notice" target="url" />
          <zeebe:input source="={&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;  &#34;national_code&#34; :national_code,&#10;  &#34;email_type&#34;:&#34;confirmation&#34;,&#10;  &#34;email&#34;:email,&#10;  &#34;phone_number&#34;:phone_number&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="11" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.HttpJson.v2" />
          <zeebe:header key="resultVariable" value="api_response" />
          <zeebe:header key="resultExpression" value="={message:response.body.message}" />
          <zeebe:header key="retryBackoff" value="PT5M" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0b504sj</bpmn:incoming>
      <bpmn:outgoing>Flow_04inom4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1l26ptn" name="send rejection notice" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="11" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="POST" target="method" />
          <zeebe:input source="http://fastapi:5000/customer-notice" target="url" />
          <zeebe:input source="={&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;  &#34;national_code&#34; :national_code,&#10;  &#34;email_type&#34;:&#34;rejecction&#34;,&#10;  &#34;email&#34;:email,&#10;  &#34;phone_number&#34;:phone_number&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="11" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.HttpJson.v2" />
          <zeebe:header key="resultVariable" value="api_response" />
          <zeebe:header key="resultExpression" value="={message:response.body.message}" />
          <zeebe:header key="retryBackoff" value="PT5M" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1jsrnog</bpmn:incoming>
      <bpmn:outgoing>Flow_1s4gkim</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0ctbde2" name="SIM card activated successfully">
      <bpmn:incoming>Flow_04inom4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:startEvent id="StartEvent_1" name="start event">
      <bpmn:outgoing>Flow_11jfzaa</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:boundaryEvent id="Event_0opizyh" name="take long" cancelActivity="false" attachedToRef="Activity_1i4ls2u">
      <bpmn:outgoing>Flow_04q99ts</bpmn:outgoing>
      <bpmn:escalationEventDefinition id="EscalationEventDefinition_0a73xyp" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_18h2lxk" name="take long" cancelActivity="false" attachedToRef="Activity_1i8s3jd">
      <bpmn:outgoing>Flow_0jhjzho</bpmn:outgoing>
      <bpmn:escalationEventDefinition id="EscalationEventDefinition_03l4n07" />
    </bpmn:boundaryEvent>
    <bpmn:callActivity id="Activity_11tz4ys" name="CRM">
      <bpmn:extensionElements>
        <zeebe:calledElement processId="Process_1d2y2uj" propagateAllChildVariables="true" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11jfzaa</bpmn:incoming>
      <bpmn:outgoing>Flow_1iaalb6</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:serviceTask id="Activity_05mp2zp" name="payment" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="11" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="POST" target="method" />
          <zeebe:input source="http://fastapi:5000/payment" target="url" />
          <zeebe:input source="={&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;  &#34;plan_type&#34;:plan_type&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="11" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.HttpJson.v2" />
          <zeebe:header key="resultVariable" value="api_response" />
          <zeebe:header key="resultExpression" value="={&#10;total:response.body.total,&#10;pay_id:response.body.pay_id&#10;}" />
          <zeebe:header key="retryBackoff" value="PT10M" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_16g0h17</bpmn:incoming>
      <bpmn:outgoing>Flow_1ydma48</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1ydma48" sourceRef="Activity_05mp2zp" targetRef="Activity_1i4ls2u" />
    <bpmn:sequenceFlow id="Flow_0mec1eb" sourceRef="Activity_1i8s3jd" targetRef="Activity_1uabvrt" />
    <bpmn:serviceTask id="Activity_1uabvrt" name="store information" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="11" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="POST" target="method" />
          <zeebe:input source="http://fastapi:5000/customer-info" target="url" />
          <zeebe:input source="={&#34;Content-Type&#34;:&#34;application/json&#34;}" target="headers" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
          <zeebe:input source="={&#10;  &#34;f_name&#34;:f_name,&#10;  &#34;l_name&#34; :l_name,&#10;  &#34;national_code&#34; :national_code,&#10;  &#34;city&#34; :city,&#10;  &#34;plan_type&#34; :plan_type,&#10;  &#34;phone_number&#34;:phone_number,&#10;  &#34;email&#34;:email&#10;}" target="body" />
          <zeebe:input source="=false" target="ignoreNullValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="11" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.HttpJson.v2" />
          <zeebe:header key="resultVariable" value="api_response" />
          <zeebe:header key="resultExpression" value="={&#10;  message:response.body.message&#10;}" />
          <zeebe:header key="errorExpression" value="=if api_response.status != 200 then &#10;  bpmnError(&#34;0&#34;, &#34;&#34;) &#10;else &#10;  null" />
          <zeebe:header key="retryBackoff" value="PT5M" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0mec1eb</bpmn:incoming>
      <bpmn:outgoing>Flow_0b504sj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0b504sj" sourceRef="Activity_1uabvrt" targetRef="Activity_1o53ooi" />
    <bpmn:boundaryEvent id="Event_0gwvt9d" attachedToRef="Activity_11tz4ys">
      <bpmn:outgoing>Flow_1utb8gx</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1jodqp9" errorRef="Error_07ixci7" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1utb8gx" sourceRef="Event_0gwvt9d" targetRef="Gateway_0qgqawn" />
    <bpmn:boundaryEvent id="Event_1s61frg" attachedToRef="Activity_05mp2zp">
      <bpmn:outgoing>Flow_1g4c97v</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1fcwki9">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT10M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1g4c97v" sourceRef="Event_1s61frg" targetRef="Gateway_1wxorp7" />
    <bpmn:boundaryEvent id="Event_0cvsp96" attachedToRef="Activity_1uabvrt">
      <bpmn:outgoing>Flow_1dgu64z</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0npft7q" errorRef="Error_0z4qsb1" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1dgu64z" sourceRef="Event_0cvsp96" targetRef="Gateway_1i9nuct" />
    <bpmn:exclusiveGateway id="Gateway_1wxorp7">
      <bpmn:incoming>Flow_1g4c97v</bpmn:incoming>
      <bpmn:incoming>Flow_1fo4rif</bpmn:incoming>
      <bpmn:outgoing>Flow_16g0h17</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_16g0h17" sourceRef="Gateway_1wxorp7" targetRef="Activity_05mp2zp" />
    <bpmn:sequenceFlow id="Flow_1iaalb6" sourceRef="Activity_11tz4ys" targetRef="Activity_1uct0ej" />
    <bpmn:userTask id="Activity_1uct0ej" name="Payment Form">
      <bpmn:extensionElements>
        <zeebe:userTask />
        <zeebe:assignmentDefinition assignee="demo" />
        <zeebe:formDefinition formId="Form_108qbnv" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1iaalb6</bpmn:incoming>
      <bpmn:outgoing>Flow_1fo4rif</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1fo4rif" sourceRef="Activity_1uct0ej" targetRef="Gateway_1wxorp7" />
  </bpmn:process>
  <bpmn:error id="Error_0e7se37" name="validation-error" errorCode="10" />
  <bpmn:error id="Error_11kb2mi" name="update-faild" errorCode="40" />
  <bpmn:error id="Error_1q6d4ie" name="faild-to-check" errorCode="20" />
  <bpmn:error id="Error_0z4qsb1" name="problem" errorCode="0" />
  <bpmn:escalation id="Escalation_3mr2o7q" name="take_long" escalationCode="0" />
  <bpmn:error id="Error_07ixci7" name="CRM-failed" errorCode="1" />
  <bpmn:error id="Error_0akbgvj" name="provision-failed" errorCode="2" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_0lw1eff">
      <bpmndi:BPMNShape id="Activity_0if58bv_di" bpmnElement="Activity_1i8s3jd">
        <dc:Bounds x="1110" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0noo8w1_di" bpmnElement="Event_0noo8w1">
        <dc:Bounds x="1932" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1917" y="145" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qgqawn_di" bpmnElement="Gateway_0qgqawn" isMarkerVisible="true">
        <dc:Bounds x="1065" y="515" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1i9nuct_di" bpmnElement="Gateway_1i9nuct" isMarkerVisible="true">
        <dc:Bounds x="1535" y="95" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0l97ek9_di" bpmnElement="Activity_19b7a6r" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <dc:Bounds x="1750" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_06pn0eh_di" bpmnElement="Activity_1i4ls2u">
        <dc:Bounds x="870" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0aj417n_di" bpmnElement="Event_0aj417n">
        <dc:Bounds x="1492" y="582" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1491" y="625" width="40" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_034yg18_di" bpmnElement="Activity_1o53ooi" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="1510" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0p8tnoc_di" bpmnElement="Activity_1l26ptn" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="1260" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ctbde2_di" bpmnElement="Event_0ctbde2">
        <dc:Bounds x="1722" y="282" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1712" y="325" width="60" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="162" y="282" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="156" y="325" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1k459q0_di" bpmnElement="Activity_05mp2zp">
        <dc:Bounds x="670" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yioibm_di" bpmnElement="Activity_1uabvrt">
        <dc:Bounds x="1300" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1wxorp7_di" bpmnElement="Gateway_1wxorp7" isMarkerVisible="true">
        <dc:Bounds x="545" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1q9ujeh_di" bpmnElement="Activity_11tz4ys">
        <dc:Bounds x="250" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1htvnwx_di" bpmnElement="Activity_1uct0ej">
        <dc:Bounds x="400" y="260" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0cvsp96_di" bpmnElement="Event_0cvsp96">
        <dc:Bounds x="1332" y="242" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1s61frg_di" bpmnElement="Event_1s61frg">
        <dc:Bounds x="672" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_18h2lxk_di" bpmnElement="Event_18h2lxk">
        <dc:Bounds x="1142" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1177" y="233" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02uvp3s_di" bpmnElement="Event_0opizyh">
        <dc:Bounds x="902" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="937" y="233" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0lnbwfy" bpmnElement="Event_0idjtrv">
        <dc:Bounds x="1142" y="322" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1127" y="365" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_06gyq7v_di" bpmnElement="Event_06gyq7v">
        <dc:Bounds x="902" y="322" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="883" y="365" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0gwvt9d_di" bpmnElement="Event_0gwvt9d">
        <dc:Bounds x="282" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_04inom4_di" bpmnElement="Flow_04inom4">
        <di:waypoint x="1610" y="300" />
        <di:waypoint x="1722" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04q99ts_di" bpmnElement="Flow_04q99ts">
        <di:waypoint x="920" y="242" />
        <di:waypoint x="920" y="70" />
        <di:waypoint x="1560" y="70" />
        <di:waypoint x="1560" y="95" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cwy55s_di" bpmnElement="Flow_0cwy55s">
        <di:waypoint x="920" y="358" />
        <di:waypoint x="920" y="470" />
        <di:waypoint x="1090" y="470" />
        <di:waypoint x="1090" y="515" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jhjzho_di" bpmnElement="Flow_0jhjzho">
        <di:waypoint x="1160" y="242" />
        <di:waypoint x="1160" y="120" />
        <di:waypoint x="1535" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0zubyo3_di" bpmnElement="Flow_0zubyo3">
        <di:waypoint x="1850" y="120" />
        <di:waypoint x="1932" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11jfzaa_di" bpmnElement="Flow_11jfzaa">
        <di:waypoint x="198" y="300" />
        <di:waypoint x="250" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12f3it3_di" bpmnElement="Flow_12f3it3">
        <di:waypoint x="1585" y="120" />
        <di:waypoint x="1750" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12n2m36_di" bpmnElement="Flow_12n2m36">
        <di:waypoint x="1160" y="358" />
        <di:waypoint x="1160" y="540" />
        <di:waypoint x="1115" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1eoaypz_di" bpmnElement="Flow_1eoaypz">
        <di:waypoint x="970" y="300" />
        <di:waypoint x="1110" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jsrnog_di" bpmnElement="Flow_1jsrnog">
        <di:waypoint x="1090" y="565" />
        <di:waypoint x="1090" y="600" />
        <di:waypoint x="1260" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1s4gkim_di" bpmnElement="Flow_1s4gkim">
        <di:waypoint x="1360" y="600" />
        <di:waypoint x="1492" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ydma48_di" bpmnElement="Flow_1ydma48">
        <di:waypoint x="770" y="300" />
        <di:waypoint x="870" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mec1eb_di" bpmnElement="Flow_0mec1eb">
        <di:waypoint x="1210" y="300" />
        <di:waypoint x="1300" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0b504sj_di" bpmnElement="Flow_0b504sj">
        <di:waypoint x="1400" y="300" />
        <di:waypoint x="1510" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1utb8gx_di" bpmnElement="Flow_1utb8gx">
        <di:waypoint x="300" y="358" />
        <di:waypoint x="300" y="540" />
        <di:waypoint x="1065" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1g4c97v_di" bpmnElement="Flow_1g4c97v">
        <di:waypoint x="690" y="358" />
        <di:waypoint x="690" y="390" />
        <di:waypoint x="570" y="390" />
        <di:waypoint x="570" y="325" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dgu64z_di" bpmnElement="Flow_1dgu64z">
        <di:waypoint x="1350" y="242" />
        <di:waypoint x="1350" y="170" />
        <di:waypoint x="1560" y="170" />
        <di:waypoint x="1560" y="145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16g0h17_di" bpmnElement="Flow_16g0h17">
        <di:waypoint x="595" y="300" />
        <di:waypoint x="670" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iaalb6_di" bpmnElement="Flow_1iaalb6">
        <di:waypoint x="350" y="300" />
        <di:waypoint x="400" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fo4rif_di" bpmnElement="Flow_1fo4rif">
        <di:waypoint x="500" y="300" />
        <di:waypoint x="545" y="300" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
